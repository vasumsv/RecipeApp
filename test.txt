@Test
void getMettedRows_ExceptionInPaymentMode() {
    // Setup
    InvoicePayableModelForPayment payment = createBasePayment();
    payment.setProviderId("123"); // Must be convertible to BigInteger (e.g., "123")
    List<InvoicePayableModelForPayment> paymentList = Collections.singletonList(payment);

    // Mock the EXACT method and parameters
    when(referentialServiceApi.getPaymentModeAndSettlementLocation( // Fix method name
        eq(new BigInteger("123")),  // Matches providerId converted to BigInteger
        any(BigInteger.class),       // entity (BigInteger)
        any(BigInteger.class),       // feeCategory (BigInteger)
        anyString(),                 // paymentDirection ("D" or "C")
        anyString(),                 // currency (e.g., "USD")
        anyString()                  // user (e.g., "user1")
    )).thenThrow(new RuntimeException("Mocked exception"));

    // Execute
    List<PaymentLinesModel> result = cashAllocationDomain.getMettedRows(paymentList, "user1");

    // Verify
    assertNotNull(result.get(0).getComment());
    verify(referentialServiceApi, times(1))
        .getPaymentModeAndSettlementLocation(any(), any(), any(), any(), any(), any());
}