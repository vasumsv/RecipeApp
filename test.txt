@Test
void getMettedRows_ExceptionInPaymentMode() {
    // Setup
    InvoicePayableModelForPayment payment = createBasePayment();
    payment.setProviderId("123"); // Must match the mocked BigInteger("123")
    List<InvoicePayableModelForPayment> paymentList = Collections.singletonList(payment);

    // Mock EXACTLY the method called by your code
    when(referentialServiceApi.getPaymentModeAndSettlementLocation( // Fix method name typo
        eq(new BigInteger("123")), // Ensure this matches payment.getProviderId() parsed to BigInteger
        any(BigInteger.class), 
        any(BigInteger.class), 
        anyString(), 
        anyString()
    )).thenThrow(new RuntimeException("Mocked exception"));

    // Execute
    List<PaymentLinesModel> result = cashAllocationDomain.getMettedRows(paymentList, "user1");

    // Verify
    assertNotNull(result.get(0).getComment());
}